(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b777"],{"2kLP":function(e,t,r){},"H6/C":function(e,t,r){"use strict";r.r(t);var s=r("vDqi"),a=r.n(s),l=r("Q2AE");function i(e){return a()({method:"post",url:"/user/add",data:e,headers:{Authorization:"bearer "+l.a.state.user.token}})}var o=r("4d7F"),n=r.n(o),u={name:"",data:function(){var e=this;return{dialogFormVisible:!1,user:{name:"",email:"",username:"",password:"",avatarPath:"",checkPass:"",authorityId:""},formLabelWidth:"90px",rules:{username:[{required:!0,message:"请输入账号名称",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],password:[{required:!0,validator:function(t,r,s){""===r?s(new Error("请输入密码")):(""!==e.user.checkPass&&e.$refs.user.validateField("checkPass"),s())},trigger:"blur"}],checkPass:[{required:!0,validator:function(t,r,s){""===r?s(new Error("请再次输入密码")):r!==e.user.password?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],name:[{required:!0,message:"请输入用户名",trigger:"blur"}]}}},methods:{handleAdd:function(){var e=this;return new n.a(function(t,r){i(e.user,e.authorityId).then(function(r){e.$message({message:r.data.message,type:"success"}),e.$emit("refresh"),e.resetForm(),e.dialogFormVisible=!1,console.log(r),t()}).catch(function(t){r(t),e.$message.error("不好意思，出错了哦~")})})},resetForm:function(){this.$refs.user.resetFields()}}},c=(r("qug9"),r("KHd+")),d=Object(c.a)(u,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-button",{staticStyle:{margin:"5px",display:"block"},attrs:{type:"primary",icon:"el-icon-plus",round:""},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增")]),e._v(" "),r("el-dialog",{attrs:{title:"新增用户",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"user",attrs:{model:e.user,rules:e.rules,"label-width":"80px",size:"mini"}},[r("el-form-item",{attrs:{label:"账号",prop:"username"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"off"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{type:"password",autocomplete:"off"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{type:"password",autocomplete:"off"},model:{value:e.user.checkPass,callback:function(t){e.$set(e.user,"checkPass",t)},expression:"user.checkPass"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[r("el-input",{staticStyle:{width:"200px"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"off"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色",prop:"userRole"}},[r("el-select",{attrs:{placeholder:"请选择","auto-complete":"off"},model:{value:e.user.authorityId,callback:function(t){e.$set(e.user,"authorityId",t)},expression:"user.authorityId"}},[r("el-option",{attrs:{label:"管理员",value:1}}),e._v(" "),r("el-option",{attrs:{label:"审核人员",value:2}})],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("确 定")])],1)],1)],1)},[],!1,null,"5266f8ee",null);d.options.__file="AddUser.vue";var m=d.exports,f={name:"",props:["currentUser"],data:function(){return{dialogFormVisible:!1,user:this.currentUser,formLabelWidth:"90px",rules:{username:[{required:!0,message:"请输入账号名称",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],name:[{required:!0,message:"请输入用户名",trigger:"blur"}]}}},methods:{handleEdit:function(){this.dialogFormVisible=!0,console.log(this.user)},handleAdd:function(){var e=this;return new n.a(function(t,r){i(e.user,e.authorityId).then(function(r){e.$message({message:r.data.message,type:"success"}),e.$emit("refresh"),e.resetForm(),e.dialogFormVisible=!1,console.log(r),t()}).catch(function(t){r(t),e.$message.error("不好意思，出错了哦~")})})},resetForm:function(){this.$refs.user.resetFields()}}},p=(r("hEHd"),Object(c.a)(f,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-button",{attrs:{size:"mini"},on:{click:e.handleEdit}},[e._v("编辑")]),e._v(" "),r("el-dialog",{attrs:{title:"编辑用户",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"user",attrs:{model:e.user,rules:e.rules,size:"mini"}},[r("el-form-item",{attrs:{label:"账号",prop:"username"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"off"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[r("el-input",{staticStyle:{width:"200px"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"off"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色",prop:"userRole"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.user.authorityId,callback:function(t){e.$set(e.user,"authorityId",t)},expression:"user.authorityId"}},[r("el-option",{attrs:{label:"管理员",value:1}}),e._v(" "),r("el-option",{attrs:{label:"审核人员",value:2}}),e._v(" "),r("el-option",{attrs:{label:"普通用户",value:3}})],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("确 定")])],1)],1)],1)},[],!1,null,"688e5de8",null));p.options.__file="EditUser.vue";var h={components:{AddUser:m,EditUser:p.exports},filters:{authorityFilter:function(e){return{ROLE_ADMIN:"success",ROLE_USER:"gray",ROLE_VERIFIER:"danger"}[e]}},data:function(){return{list:null,listLoading:!0,deleteVisible:!1}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,a()({method:"get",url:"/user/list",headers:{"Content-type":"application/json",Authorization:"bearer "+l.a.state.user.token}}).then(function(t){e.list=t.data.data,e.listLoading=!1})},handleEdit:function(e,t){console.log(e,t)},handleDelete:function(e){var t=this;(function(e){return a()({method:"delete",url:"/user/",params:{id:e},headers:{Authorization:"bearer "+l.a.state.user.token}})})(e).then(function(e){t.$message({message:e.data.message,type:"success"}),t.fetchData()}).catch(function(e){t.$message.error("不好意思，出错了哦~")})},refreshData:function(){this.fetchData()}}},v=Object(c.a)(h,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("add-user",{on:{refresh:e.refreshData}}),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{align:"center",width:"50",label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.$index)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"用户名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.username)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"email",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.email)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.createTime)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{"class-name":"status-col",label:"角色",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:e._f("authorityFilter")(t.row.authorities[0].authority)}},["ROLE_ADMIN"===t.row.authorities[0].authority?r("span",[e._v("管理员")]):"ROLE_VERIFIER"===t.row.authorities[0].authority?r("span",[e._v("审核人员")]):r("span",[e._v("用户")])])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("edit-user",{attrs:{currentUser:t.row}}),e._v(" "),r("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(r){e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)},[],!1,null,null,null);v.options.__file="UserList.vue";t.default=v.exports},hEHd:function(e,t,r){"use strict";var s=r("2kLP");r.n(s).a},pnv6:function(e,t,r){},qug9:function(e,t,r){"use strict";var s=r("pnv6");r.n(s).a}}]);